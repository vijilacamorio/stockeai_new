/* FormViewer - v1.2.0 | Copyright 2022 IDRsolutions */
!function(){"use strict";var e={LAYOUT_CONTINUOUS:"continuous",SELECT_SELECT:"select",SELECT_PAN:"pan",ZOOM_SPECIFIC:"specific",ZOOM_ACTUALSIZE:"actualsize",ZOOM_FITWIDTH:"fitwidth",ZOOM_FITHEIGHT:"fitheight",ZOOM_FITPAGE:"fitpage",ZOOM_AUTO:"auto"},t=1,o=0,n,i,r,a,u=!0,s,c=[],l,f,m=[],d=10,g={},p=!1,v,O="",T=!1;e.setup=function(d){d||(d=FormViewer.config),p=!0,a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s=d.bounds,o=d.pagecount,d.url&&(O=d.url),T=!!d.isR2L,i=D("formviewer"),T&&R.addClass(i,"isR2L"),A.setup();var g=document.createElement("style");g.setAttribute("type","text/css"),document.head.appendChild(g),f=g.sheet,(t<1||t>o)&&(t=1);for(var b=0;b<o;b++)if(s[b][0]!=s[0][0]||s[b][1]!=s[0][1]){u=!1;break}switch(v){case FormViewer.LAYOUT_CONTINUOUS:break;default:v=FormViewer.LAYOUT_CONTINUOUS}var F=[e.LAYOUT_CONTINUOUS];for(v===FormViewer.LAYOUT_CONTINUOUS&&(r=E),window.addEventListener("resize",(function(){A.updateZoom()})),l=D("overlay"),S.setup(),null==(n=D("contentContainer"))&&(n=D("mainXFAForm")),n.style.transform="translateZ(0)",n.style.padding="5px",b=1;b<=o;b++){var L=D("page"+b);L.setAttribute("style","width: "+s[b-1][0]+"px; height: "+s[b-1][1]+"px;"),m[b]=L,c[b]=h(L,b)}r.setup(t),R.addClass(i,"layout-"+r.toString()),A.updateZoomToDefault(),r.goToPage(t);var C={selectMode:S.currentSelectMode,isMobile:a,layout:r.toString(),availableLayouts:F,isFirstPage:1===t,isLastPage:r.isLastPage(t)};for(var w in d)d.hasOwnProperty(w)&&(C[w]=d[w]);C.page=t,e.fire("ready",C)};var h=function(t,o){var n={isVisible:function(){return!0},isLoaded:function(){return!0},hide:function(){},unload:function(){e.fire("pageunload",{page:o})},load:function(){e.fire("pageload",{page:o})}};return n},b=function(n){t!=n&&(t=n,e.fire("pagechange",{page:t,pagecount:o,isFirstPage:1===t,isLastPage:r.isLastPage(n)}))},E=function(){var n={},r=0,a=0,u=[];n.setup=function(){i.addEventListener("scroll",c);for(var e=0;e<o;e++)s[e][0]>r&&(r=s[e][0]),s[e][1]>a&&(a=s[e][1])},n.unload=function(){i.removeEventListener("scroll",c)};var c=function(){l()},l=function(){var e,t;if(m[1].getBoundingClientRect().top>0)b(1);else for(e=1;e<=o;e++){var n=m[e].getBoundingClientRect();t=n.top;var i=n.bottom-n.top;if(t<=.25*i&&t>.5*-i){b(e);break}}f()},f=function(){u=[t];var e,n,r=i.clientHeight,a=function(e){return(n=m[e].getBoundingClientRect()).bottom>0&&n.top<r};for(e=t-1;e>=1&&a(e);e--)u.push(e);for(e=t+1;e<=o&&a(e);e++)u.push(e)};return n.goToPage=function(e,t){var o=0;if(t){var n=t.split(" ");switch(n[0]){case"XYZ":o=Number(n[2]);break;case"FitH":o=Number(n[1]);break;case"FitR":o=Number(n[4]);break;case"FitBH":o=Number(n[1]);break}(isNaN(o)||o<0||o>s[e-1][1])&&(o=0),0!==o&&(o=s[e-1][1]-o)}var r=A.getZoom();i.scrollTop=m[e].offsetTop-5+o*r,b(e),f()},n.getVisiblePages=function(){return u},n.updateLayout=function(){},n.isLastPage=function(e){return e===o},n.getZoomBounds=function(){return{width:r,height:a}},n.getAutoZoom=function(e){return n.getZoomBounds().width>i.clientWidth-d?e:1},n.next=function(){e.goToPage(t+1)},n.prev=function(){e.goToPage(t-1)},n.toString=function(){return FormViewer.LAYOUT_CONTINUOUS},n}(),F=function(e){try{e.getSelection?e.getSelection().empty?e.getSelection().empty():e.getSelection().removeAllRanges&&e.getSelection().removeAllRanges():e.document.selection&&e.document.selection.empty()}catch(e){}},L=function(e){try{F(e)}catch(e){}},S=function(){var t={},o,n,r=!1,a;t.setup=function(){switch(a){case FormViewer.SELECT_PAN:case FormViewer.SELECT_SELECT:break;default:a=FormViewer.SELECT_SELECT}this.currentSelectMode=a,this.currentSelectMode==e.SELECT_SELECT?t.enableTextSelection():t.enablePanning()},t.enableTextSelection=function(){this.currentSelectMode=e.SELECT_SELECT,R.removeClass(l,"panning"),l.removeEventListener("mousedown",u),document.removeEventListener("mouseup",s),l.removeEventListener("mousemove",c)};var u=function(e){return e=e||window.event,R.addClass(l,"mousedown"),o=e.clientX,n=e.clientY,r=!0,!1},s=function(){R.removeClass(l,"mousedown"),r=!1},c=function(e){if(r)return e=e||window.event,i.scrollLeft=i.scrollLeft+o-e.clientX,i.scrollTop=i.scrollTop+n-e.clientY,o=e.clientX,n=e.clientY,!1};return t.enablePanning=function(){this.currentSelectMode=e.SELECT_PAN,F(window),R.addClass(l,"panning"),l.addEventListener("mousedown",u),document.addEventListener("mouseup",s),l.addEventListener("mousemove",c)},t.setDefaultMode=function(e){a=e},t}();e.setSelectMode=function(t){if(p){if(a)return;t==e.SELECT_SELECT?S.enableTextSelection():S.enablePanning(),e.fire("selectchange",{type:t})}else S.setDefaultMode(t)};var A=(C=e.ZOOM_AUTO,P=[.25,.5,.75,1,1.25,1.5,2,2.5,3,3.5,4],I=[e.ZOOM_AUTO,e.ZOOM_FITPAGE,e.ZOOM_FITHEIGHT,e.ZOOM_FITWIDTH,e.ZOOM_ACTUALSIZE],Z=0,M=1,U=function(e,t,o,n,i){var r;return"-webkit-transform: "+(r=i?"translate3d("+t+"px, "+o+"px, 0) scale("+n+")":"translateX("+t+"px) translateY("+o+"px) scale("+n+")")+";\n-ms-transform: "+r+";\ntransform: "+r+";"},x=function(t){var n=!1,a=!1;(M=H(t))>=4?(M=4,a=!0):M<=.25&&(M=.25,n=!0);var u=i.scrollTop/i.scrollHeight;r.updateLayout();for(var l=r.getVisiblePages(),f=1;f<=o;f++)-1===l.indexOf(f)&&c[f].hide();w&&y.deleteRule(w);var d=U(null,0,0,M,!1);w=y.insertRule(".page-inner { \n"+d+"\n}",y.cssRules.length);for(var g=0;g<o;g++)m[g+1].style.width=Math.floor(s[g][0]*M)+"px",m[g+1].style.height=Math.floor(s[g][1]*M)+"px";i.scrollTop=i.scrollHeight*u,++Z%2==1&&x(),e.fire("zoomchange",{zoomType:C,zoomValue:M,isMinZoom:n,isMaxZoom:a})},V=function(){for(var e=M,t=P[P.length-1],o=0,n;o<P.length;o++)if(P[o]>e){t=P[o];break}for(o=0;o<I.length;o++){var i=H(I[o]);if(i>e&&i<=t){if(n&&i===t)continue;n=I[o],t=i}}return n||t},k=function(){for(var e=M,t=P[0],o=P.length-1,n;o>=0;o--)if(P[o]<e){t=P[o];break}for(o=0;o<I.length;o++){var i=H(I[o]);if(i<e&&i>=t){if(n&&i===t)continue;n=I[o],t=i}}return n||t},H=function(t){var o=r.getZoomBounds(),n=(i.clientWidth-d)/o.width,a=(i.clientHeight-d)/o.height,u=parseFloat(t);switch(isNaN(u)||(M=u,t=e.ZOOM_SPECIFIC),t||(t=C),t){case e.ZOOM_AUTO:M=r.getAutoZoom(n,a);break;case e.ZOOM_FITWIDTH:M=n;break;case e.ZOOM_FITHEIGHT:M=a;break;case e.ZOOM_FITPAGE:M=Math.min(n,a);break;case e.ZOOM_ACTUALSIZE:M=1;break}return C=t,M},{setup:function(){var e=document.createElement("style");e.setAttribute("type","text/css"),document.head.appendChild(e),y=e.sheet},updateZoom:x,updateZoomToDefault:function(){x(_)},zoomIn:function(){x(V())},zoomOut:function(){x(k())},getZoom:function(){return M},setDefault:function(e){_=e}}),C,w,P,I,Z,y,M,_,N,U,x,V,k,H;e.zoomIn=function(){A.zoomIn()},e.zoomOut=function(){A.zoomOut()},e.setZoom=function(e){p?A.updateZoom(e):A.setDefault(e)},e.goToPage=function(e,n){p?e>=1&&e<=o&&r.goToPage(Number(e),n):t=e},e.next=function(){r.next()},e.prev=function(){r.prev()},e.setLayout=function(o){p?(r.unload(),R.removeClass(i,"layout-"+r.toString()),(r=E).setup(t),R.addClass(i,"layout-"+r.toString()),A.updateZoom(FormViewer.ZOOM_AUTO),r.goToPage(t),e.fire("layoutchange",{layout:o})):v=o},e.updateLayout=function(){A.updateZoom()};var D=function(e){return document.getElementById(e)};e.on=function(e,t){g[e]||(g[e]=[]),-1===g[e].indexOf(t)&&g[e].push(t)},e.off=function(e,t){if(g[e]){var o=g[e].indexOf(t);-1!==o&&g[e].splice(o,1)}},e.fire=function(e,t){g[e]&&g[e].forEach((function(e){e(t)}))};var R={addClass:function(e,t){var o=0!==e.className.length?e.className.split(" "):[],n;-1===o.indexOf(t)&&(o.push(t),e.className=o.join(" "))},removeClass:function(){for(var e=arguments[0],t=0!==e.className.length?e.className.split(" "):[],o=1;o<arguments.length;o++){var n=t.indexOf(arguments[o]);-1!==n&&t.splice(n,1)}e.className=t.join(" ")}};e.handleFormSubmission=function(e,t){FormVuAPI&&(e||(e=window.prompt("Please enter the URL to submit to"))?z(e,t):console.log("No URL provided for FormSubmission"))};var z=function(e,t){if(FormVuAPI){var o={url:e,success:function(){alert("Form submitted successfully")},failure:function(){alert("Form failed to submit, please try again")}},n="string"==typeof t?t.toLowerCase():"";if(e.startsWith("mailto:"))return o.format=n,FormVuAPI.submitFormAsMail(o),void 0;switch(n){case"json":"function"==typeof FormVuAPI.submitFormAsJSON&&FormVuAPI.submitFormAsJSON(o);break;case"pdf":"function"==typeof FormVuAPI.submitFormAsPDF&&FormVuAPI.submitFormAsPDF(o);break;case"formdata":default:"function"==typeof FormVuAPI.submitFormAsFormData&&FormVuAPI.submitFormAsFormData(o);break}}};"function"==typeof define&&define.amd?define(["formviewer"],[],(function(){return e})):"object"==typeof module&&module.exports?module.exports=e:window.FormViewer=e}();